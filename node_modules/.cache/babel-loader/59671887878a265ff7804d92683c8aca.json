{"remainingRequest":"G:\\远程京东\\jingdong\\node_modules\\babel-loader\\lib\\index.js!G:\\远程京东\\jingdong\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!G:\\远程京东\\jingdong\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!G:\\远程京东\\jingdong\\src\\views\\orderList\\OrderList.vue?vue&type=script&lang=js","dependencies":[{"path":"G:\\远程京东\\jingdong\\src\\views\\orderList\\OrderList.vue","mtime":1625990349778},{"path":"G:\\远程京东\\jingdong\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\远程京东\\jingdong\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"G:\\远程京东\\jingdong\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\远程京东\\jingdong\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkc6L1x1OEZEQ1x1N0EwQlx1NEVBQ1x1NEUxQy9qaW5nZG9uZy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCBEb2NrZXIgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9Eb2NrZXInOwppbXBvcnQgeyByZWFjdGl2ZSwgdG9SZWZzIH0gZnJvbSAndnVlJzsKaW1wb3J0IHsgZ2V0IH0gZnJvbSAnLi4vLi4vdXRpbHMvcmVxdWVzdCc7IC8vIOWkhOeQhuiuouWNleWIl+ihqOmAu+i+kQoKdmFyIHVzZU9yZGVyTGlzdEVmZmVjdCA9IGZ1bmN0aW9uIHVzZU9yZGVyTGlzdEVmZmVjdCgpIHsKICB2YXIgZGF0YSA9IHJlYWN0aXZlKHsKICAgIGxpc3Q6IFtdCiAgfSk7CgogIHZhciBnZXROZWFyYnlMaXN0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgX3Jlc3VsdCRkYXRhOwoKICAgICAgdmFyIHJlc3VsdCwgb3JkZXJMaXN0OwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIGdldCgnL2FwaS9vcmRlcicpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTsKCiAgICAgICAgICAgICAgaWYgKChyZXN1bHQgPT09IG51bGwgfHwgcmVzdWx0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXN1bHQuZXJybm8pID09PSAwICYmIHJlc3VsdCAhPT0gbnVsbCAmJiByZXN1bHQgIT09IHZvaWQgMCAmJiAoX3Jlc3VsdCRkYXRhID0gcmVzdWx0LmRhdGEpICE9PSBudWxsICYmIF9yZXN1bHQkZGF0YSAhPT0gdm9pZCAwICYmIF9yZXN1bHQkZGF0YS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIG9yZGVyTGlzdCA9IHJlc3VsdC5kYXRhOwogICAgICAgICAgICAgICAgb3JkZXJMaXN0LmZvckVhY2goZnVuY3Rpb24gKG9yZGVyKSB7CiAgICAgICAgICAgICAgICAgIC8vIGZvckVhY2jmlrnms5XkuK3nmoRmdW5jdGlvbuWbnuiwg+aUr+aMgTPkuKrlj4LmlbDvvIznrKwx5Liq5piv6YGN5Y6G55qE5pWw57uE5YaF5a6577yb56ysMuS4quaYr+WvueW6lOeahOaVsOe7hOe0ouW8le+8jOesrDPkuKrmmK/mlbDnu4TmnKzouqsKICAgICAgICAgICAgICAgICAgdmFyIHByb2R1Y3RzID0gb3JkZXIucHJvZHVjdHMgfHwgW107CiAgICAgICAgICAgICAgICAgIHZhciB0b3RhbFByaWNlID0gMDsKICAgICAgICAgICAgICAgICAgdmFyIHRvdGFsTnVtYmVyID0gMDsKICAgICAgICAgICAgICAgICAgcHJvZHVjdHMuZm9yRWFjaChmdW5jdGlvbiAocHJvZHVjdEl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgX3Byb2R1Y3RJdGVtJHByb2R1Y3Q7CgogICAgICAgICAgICAgICAgICAgIHRvdGFsTnVtYmVyICs9IChwcm9kdWN0SXRlbSA9PT0gbnVsbCB8fCBwcm9kdWN0SXRlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcHJvZHVjdEl0ZW0ub3JkZXJTYWxlcykgfHwgMDsKICAgICAgICAgICAgICAgICAgICB0b3RhbFByaWNlICs9IChwcm9kdWN0SXRlbSA9PT0gbnVsbCB8fCBwcm9kdWN0SXRlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9wcm9kdWN0SXRlbSRwcm9kdWN0ID0gcHJvZHVjdEl0ZW0ucHJvZHVjdCkgPT09IG51bGwgfHwgX3Byb2R1Y3RJdGVtJHByb2R1Y3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wcm9kdWN0SXRlbSRwcm9kdWN0LnByaWNlKSAqIChwcm9kdWN0SXRlbSA9PT0gbnVsbCB8fCBwcm9kdWN0SXRlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcHJvZHVjdEl0ZW0ub3JkZXJTYWxlcykgfHwgMDsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIG9yZGVyLnRvdGFsUHJpY2UgPSB0b3RhbFByaWNlOwogICAgICAgICAgICAgICAgICBvcmRlci50b3RhbE51bWJlciA9IHRvdGFsTnVtYmVyOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBkYXRhLmxpc3QgPSByZXN1bHQuZGF0YTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpOwoKICAgIHJldHVybiBmdW5jdGlvbiBnZXROZWFyYnlMaXN0KCkgewogICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9KCk7CgogIGdldE5lYXJieUxpc3QoKTsKCiAgdmFyIF90b1JlZnMgPSB0b1JlZnMoZGF0YSksCiAgICAgIGxpc3QgPSBfdG9SZWZzLmxpc3Q7CgogIHJldHVybiB7CiAgICBsaXN0OiBsaXN0CiAgfTsKfTsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnT3JkZXJMaXN0JywKICBjb21wb25lbnRzOiB7CiAgICBEb2NrZXI6IERvY2tlcgogIH0sCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKCkgewogICAgdmFyIF91c2VPcmRlckxpc3RFZmZlY3QgPSB1c2VPcmRlckxpc3RFZmZlY3QoKSwKICAgICAgICBsaXN0ID0gX3VzZU9yZGVyTGlzdEVmZmVjdC5saXN0OwoKICAgIHJldHVybiB7CiAgICAgIGxpc3Q6IGxpc3QKICAgIH07CiAgfQp9Ow=="},{"version":3,"sources":["G:\\远程京东\\jingdong\\src\\views\\orderList\\OrderList.vue"],"names":[],"mappings":";;;AAuCA,OAAO,MAAP,MAAmB,yBAAnB;AACA,SAAS,QAAT,EAAmB,MAAnB,QAAiC,KAAjC;AACA,SAAS,GAAT,QAAoB,qBAApB,C,CACA;;AACA,IAAM,kBAAiB,GAAI,SAArB,kBAAqB,GAAM;AAC/B,MAAM,IAAG,GAAI,QAAQ,CAAC;AAAE,IAAA,IAAI,EAAE;AAAR,GAAD,CAArB;;AACA,MAAM,aAAY;AAAA,uEAAI;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACC,GAAG,CAAC,YAAD,CADJ;;AAAA;AACd,cAAA,MADc;AAEpB,cAAA,OAAO,CAAC,GAAR,CAAY,MAAZ;;AACA,kBAAI,CAAA,MAAM,SAAN,IAAA,MAAM,WAAN,YAAA,MAAM,CAAE,KAAR,MAAkB,CAAlB,IAAuB,MAAvB,aAAuB,MAAvB,+BAAuB,MAAM,CAAE,IAA/B,yCAAuB,aAAc,MAAzC,EAAiD;AACzC,gBAAA,SADyC,GAC7B,MAAM,CAAC,IADsB;AAE/C,gBAAA,SAAS,CAAC,OAAV,CAAkB,UAAC,KAAD,EAAW;AAAE;AAC7B,sBAAM,QAAO,GAAI,KAAK,CAAC,QAAN,IAAkB,EAAnC;AACA,sBAAI,UAAS,GAAI,CAAjB;AACA,sBAAI,WAAU,GAAI,CAAlB;AACA,kBAAA,QAAQ,CAAC,OAAT,CAAiB,UAAC,WAAD,EAAiB;AAAA;;AAChC,oBAAA,WAAU,IAAM,CAAA,WAAW,SAAX,IAAA,WAAW,WAAX,YAAA,WAAW,CAAE,UAAb,KAA2B,CAA3C;AACA,oBAAA,UAAS,IAAO,CAAA,WAAW,SAAX,IAAA,WAAW,WAAX,oCAAA,WAAW,CAAE,OAAb,8EAAsB,KAAtB,KAA8B,WAA9B,aAA8B,WAA9B,uBAA8B,WAAW,CAAE,UAA3C,CAAD,IAA2D,CAA1E;AACD,mBAHD;AAIA,kBAAA,KAAK,CAAC,UAAN,GAAmB,UAAnB;AACA,kBAAA,KAAK,CAAC,WAAN,GAAoB,WAApB;AACD,iBAVD;AAWA,gBAAA,IAAI,CAAC,IAAL,GAAY,MAAM,CAAC,IAAnB;AACF;;AAjBoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAJ;;AAAA,oBAAZ,aAAY;AAAA;AAAA;AAAA,KAAlB;;AAmBA,EAAA,aAAa;;AACb,gBAAiB,MAAM,CAAC,IAAD,CAAvB;AAAA,MAAQ,IAAR,WAAQ,IAAR;;AACA,SAAO;AAAE,IAAA,IAAG,EAAH;AAAF,GAAP;AACF,CAxBA;;AA0BA,eAAe;AACb,EAAA,IAAI,EAAE,WADO;AAEb,EAAA,UAAU,EAAE;AAAE,IAAA,MAAK,EAAL;AAAF,GAFC;AAGb,EAAA,KAHa,mBAGJ;AACP,8BAAiB,kBAAkB,EAAnC;AAAA,QAAQ,IAAR,uBAAQ,IAAR;;AACA,WAAO;AAAE,MAAA,IAAG,EAAH;AAAF,KAAP;AACF;AANa,CAAf","sourcesContent":["<template>\r\n  <div class=\"wrapper\">\r\n    <div class=\"title\">我的订单</div>\r\n    <div class=\"orders\">\r\n      <div\r\n        class=\"order\"\r\n        v-for=\"(item, index) in list\"\r\n        :key=\"index\"\r\n      >\r\n        <div class=\"order__title\">\r\n          {{item.shopName}}\r\n          <span class=\"order__status\">\r\n            {{item.isCanceled ? '已取消' : '已下单'}}\r\n          </span>\r\n        </div>\r\n        <div class=\"order__content\">\r\n          <div class=\"order__content__imgs\">\r\n            <template\r\n              v-for=\"(innerItem, innerIndex) in item.products\"\r\n              :key=\"innerIndex\"\r\n            >\r\n              <img\r\n                class=\"order__content__img\"\r\n                :src=\"innerItem.product.img\"\r\n                v-if=\"innerIndex <= 3\"\r\n              />\r\n            </template>\r\n          </div>\r\n          <div class=\"order__content__info\">\r\n            <div class=\"order__content__price\">¥ {{item.totalPrice}}</div>\r\n            <div class=\"order__content__count\">共 {{item.totalNumber}} 件</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <Docker :currentIndex=\"2\"/>\r\n</template>\r\n<script>\r\nimport Docker from '../../components/Docker'\r\nimport { reactive, toRefs } from 'vue'\r\nimport { get } from '../../utils/request'\r\n// 处理订单列表逻辑\r\nconst useOrderListEffect = () => {\r\n  const data = reactive({ list: [] })\r\n  const getNearbyList = async () => {\r\n    const result = await get('/api/order')\r\n    console.log(result)\r\n    if (result?.errno === 0 && result?.data?.length) {\r\n      const orderList = result.data\r\n      orderList.forEach((order) => { // forEach方法中的function回调支持3个参数，第1个是遍历的数组内容；第2个是对应的数组索引，第3个是数组本身\r\n        const products = order.products || []\r\n        let totalPrice = 0\r\n        let totalNumber = 0\r\n        products.forEach((productItem) => {\r\n          totalNumber += (productItem?.orderSales || 0)\r\n          totalPrice += ((productItem?.product?.price * productItem?.orderSales) || 0)\r\n        })\r\n        order.totalPrice = totalPrice\r\n        order.totalNumber = totalNumber\r\n      })\r\n      data.list = result.data\r\n    }\r\n  }\r\n  getNearbyList()\r\n  const { list } = toRefs(data)\r\n  return { list }\r\n}\r\n\r\nexport default {\r\n  name: 'OrderList',\r\n  components: { Docker },\r\n  setup () {\r\n    const { list } = useOrderListEffect()\r\n    return { list }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '../../style/viriables.scss';\r\n.wrapper {\r\n  overflow-y: auto;\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  bottom: .5rem;\r\n  right: 0;\r\n  background: rgb(248, 248,248);\r\n}\r\n.title {\r\n  line-height: .44rem;\r\n  background: $bgcolor;\r\n  font-size: .16rem;\r\n  color: $content-fontcolor;\r\n  text-align: center;\r\n}\r\n.order {\r\n  margin: .16rem .18rem;\r\n  padding: .16rem;\r\n  background: $bgcolor;\r\n  &__title {\r\n    margin-bottom: .16rem;\r\n    line-height: .22rem;\r\n    font-size: .16rem;\r\n    color: $content-fontcolor;\r\n  }\r\n  &__status {\r\n    float: right;\r\n    font-size: .14rem;\r\n    color: $light-fontcolor;\r\n  }\r\n  &__content {\r\n    display: flex;\r\n    &__imgs {\r\n      flex: 1;\r\n    }\r\n    &__img {\r\n      width: .4rem;\r\n      height: .4rem;\r\n      margin-right: .12rem;\r\n    }\r\n    &__info {\r\n      width: .7rem;\r\n    }\r\n    &__price {\r\n      margin-bottom: .04rem;\r\n      line-height: .2rem;\r\n      font-size: .14rem;\r\n      color: $hightlight-fontcolor;\r\n      text-align: right;\r\n    }\r\n    &__count {\r\n      line-height: .14rem;\r\n      font-size: .12rem;\r\n      color: $content-fontcolor;\r\n      text-align: right;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"],"sourceRoot":""}]}