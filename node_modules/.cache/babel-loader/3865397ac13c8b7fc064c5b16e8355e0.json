{"remainingRequest":"G:\\远程京东\\jingdong\\node_modules\\babel-loader\\lib\\index.js!G:\\远程京东\\jingdong\\node_modules\\eslint-loader\\index.js??ref--13-0!G:\\远程京东\\jingdong\\src\\effects\\cartEffects.js","dependencies":[{"path":"G:\\远程京东\\jingdong\\src\\effects\\cartEffects.js","mtime":1625835979929},{"path":"G:\\远程京东\\jingdong\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\远程京东\\jingdong\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"G:\\远程京东\\jingdong\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLnRvLWZpeGVkLmpzIjsKaW1wb3J0IHsgdXNlU3RvcmUgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgY29tcHV0ZWQgfSBmcm9tICd2dWUnOyAvLyDotK3nianovabnm7jlhbPpgLvovpEKCmV4cG9ydCB2YXIgdXNlQ29tbW9uQ2FydEVmZmVjdCA9IGZ1bmN0aW9uIHVzZUNvbW1vbkNhcnRFZmZlY3Qoc2hvcElkKSB7CiAgdmFyIHN0b3JlID0gdXNlU3RvcmUoKTsKICB2YXIgY2FydExpc3QgPSBzdG9yZS5zdGF0ZS5jYXJ0TGlzdDsKCiAgdmFyIGNoYW5nZUNhcnRJdGVtSW5mbyA9IGZ1bmN0aW9uIGNoYW5nZUNhcnRJdGVtSW5mbyhzaG9wSWQsIHByb2R1Y3RJZCwgcHJvZHVjdEluZm8sIG51bSkgewogICAgc3RvcmUuY29tbWl0KCdjaGFuZ2VDYXJ0SXRlbUluZm8nLCB7CiAgICAgIHNob3BJZDogc2hvcElkLAogICAgICBwcm9kdWN0SWQ6IHByb2R1Y3RJZCwKICAgICAgcHJvZHVjdEluZm86IHByb2R1Y3RJbmZvLAogICAgICBudW06IG51bQogICAgfSk7CiAgfTsKCiAgdmFyIHByb2R1Y3RMaXN0ID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgdmFyIF9jYXJ0TGlzdCRzaG9wSWQ7CgogICAgdmFyIHByb2R1Y3RMaXN0ID0gKChfY2FydExpc3Qkc2hvcElkID0gY2FydExpc3Rbc2hvcElkXSkgPT09IG51bGwgfHwgX2NhcnRMaXN0JHNob3BJZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NhcnRMaXN0JHNob3BJZC5wcm9kdWN0TGlzdCkgfHwge307IC8vIOWmguaenOi0reeJqei9puS4reayoeacieivpeWVhumTuueahOWVhuWTge+8jOmCo+S5iOWwseS7pOivpeWVhuWTgeWIl+ihqOS4uuepuuWvueixoQoKICAgIHJldHVybiBwcm9kdWN0TGlzdDsKICB9KTsKICB2YXIgc2hvcE5hbWUgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICB2YXIgX2NhcnRMaXN0JHNob3BJZDI7CgogICAgdmFyIHNob3BOYW1lID0gKChfY2FydExpc3Qkc2hvcElkMiA9IGNhcnRMaXN0W3Nob3BJZF0pID09PSBudWxsIHx8IF9jYXJ0TGlzdCRzaG9wSWQyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY2FydExpc3Qkc2hvcElkMi5zaG9wTmFtZSkgfHwgJyc7CiAgICByZXR1cm4gc2hvcE5hbWU7CiAgfSk7CiAgdmFyIGNhbGN1bGF0aW9ucyA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgIHZhciBfY2FydExpc3Qkc2hvcElkMzsKCiAgICB2YXIgcHJvZHVjdExpc3QgPSAoX2NhcnRMaXN0JHNob3BJZDMgPSBjYXJ0TGlzdFtzaG9wSWRdKSA9PT0gbnVsbCB8fCBfY2FydExpc3Qkc2hvcElkMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NhcnRMaXN0JHNob3BJZDMucHJvZHVjdExpc3Q7CiAgICB2YXIgcmVzdWx0ID0gewogICAgICB0b3RhbDogMCwKICAgICAgcHJpY2U6IDAsCiAgICAgIGFsbENoZWNrZWQ6IHRydWUKICAgIH07CgogICAgaWYgKHByb2R1Y3RMaXN0KSB7CiAgICAgIGZvciAodmFyIGkgaW4gcHJvZHVjdExpc3QpIHsKICAgICAgICB2YXIgcHJvZHVjdCA9IHByb2R1Y3RMaXN0W2ldOwogICAgICAgIHJlc3VsdC50b3RhbCArPSBwcm9kdWN0LmNvdW50OwoKICAgICAgICBpZiAocHJvZHVjdC5jaGVjaykgewogICAgICAgICAgcmVzdWx0LnByaWNlICs9IHByb2R1Y3QuY291bnQgKiBwcm9kdWN0LnByaWNlOwogICAgICAgIH0KCiAgICAgICAgaWYgKHByb2R1Y3QuY291bnQgPiAwICYmICFwcm9kdWN0LmNoZWNrKSB7CiAgICAgICAgICByZXN1bHQuYWxsQ2hlY2tlZCA9IGZhbHNlOyAvLyDlj6ropoHmnInkuIDkuKrllYblk4HnmoTnirbmgIHkuI3mmK9jaGVjaz10cnVl6YKj5LmI5YWo6YOo55qEY2hlY2vnirbmgIHlsLHkuLpmYWxzZQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHJlc3VsdC5wcmljZSA9IHJlc3VsdC5wcmljZS50b0ZpeGVkKDIpOwogICAgcmV0dXJuIHJlc3VsdDsKICB9KTsKICByZXR1cm4gewogICAgY2FydExpc3Q6IGNhcnRMaXN0LAogICAgY2hhbmdlQ2FydEl0ZW1JbmZvOiBjaGFuZ2VDYXJ0SXRlbUluZm8sCiAgICBwcm9kdWN0TGlzdDogcHJvZHVjdExpc3QsCiAgICBzaG9wTmFtZTogc2hvcE5hbWUsCiAgICBjYWxjdWxhdGlvbnM6IGNhbGN1bGF0aW9ucwogIH07Cn07"},{"version":3,"sources":["G:/远程京东/jingdong/src/effects/cartEffects.js"],"names":["useStore","computed","useCommonCartEffect","shopId","store","cartList","state","changeCartItemInfo","productId","productInfo","num","commit","productList","shopName","calculations","result","total","price","allChecked","i","product","count","check","toFixed"],"mappings":";AAAA,SAASA,QAAT,QAAyB,MAAzB;AACA,SAASC,QAAT,QAAyB,KAAzB,C,CACA;;AACA,OAAO,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACC,MAAD,EAAY;AAC7C,MAAMC,KAAK,GAAGJ,QAAQ,EAAtB;AACA,MAAMK,QAAQ,GAAGD,KAAK,CAACE,KAAN,CAAYD,QAA7B;;AACA,MAAME,kBAAkB,GAAG,SAArBA,kBAAqB,CAACJ,MAAD,EAASK,SAAT,EAAoBC,WAApB,EAAiCC,GAAjC,EAAyC;AAClEN,IAAAA,KAAK,CAACO,MAAN,CAAa,oBAAb,EAAmC;AACjCR,MAAAA,MAAM,EAANA,MADiC;AACzBK,MAAAA,SAAS,EAATA,SADyB;AACdC,MAAAA,WAAW,EAAXA,WADc;AACDC,MAAAA,GAAG,EAAHA;AADC,KAAnC;AAGD,GAJD;;AAKA,MAAME,WAAW,GAAGX,QAAQ,CAAC,YAAM;AAAA;;AACjC,QAAMW,WAAW,GAAG,qBAAAP,QAAQ,CAACF,MAAD,CAAR,sEAAkBS,WAAlB,KAAiC,EAArD,CADiC,CACsB;;AACvD,WAAOA,WAAP;AACD,GAH2B,CAA5B;AAKA,MAAMC,QAAQ,GAAGZ,QAAQ,CAAC,YAAM;AAAA;;AAC9B,QAAMY,QAAQ,GAAG,sBAAAR,QAAQ,CAACF,MAAD,CAAR,wEAAkBU,QAAlB,KAA8B,EAA/C;AACA,WAAOA,QAAP;AACD,GAHwB,CAAzB;AAIA,MAAMC,YAAY,GAAGb,QAAQ,CAAC,YAAM;AAAA;;AAClC,QAAMW,WAAW,wBAAGP,QAAQ,CAACF,MAAD,CAAX,sDAAG,kBAAkBS,WAAtC;AAEA,QAAMG,MAAM,GAAG;AACbC,MAAAA,KAAK,EAAE,CADM;AAEbC,MAAAA,KAAK,EAAE,CAFM;AAGbC,MAAAA,UAAU,EAAE;AAHC,KAAf;;AAKA,QAAIN,WAAJ,EAAiB;AACf,WAAK,IAAMO,CAAX,IAAgBP,WAAhB,EAA6B;AAC3B,YAAMQ,OAAO,GAAGR,WAAW,CAACO,CAAD,CAA3B;AACAJ,QAAAA,MAAM,CAACC,KAAP,IAAgBI,OAAO,CAACC,KAAxB;;AACA,YAAID,OAAO,CAACE,KAAZ,EAAmB;AACjBP,UAAAA,MAAM,CAACE,KAAP,IAAiBG,OAAO,CAACC,KAAR,GAAgBD,OAAO,CAACH,KAAzC;AACD;;AACD,YAAIG,OAAO,CAACC,KAAR,GAAgB,CAAhB,IAAqB,CAACD,OAAO,CAACE,KAAlC,EAAyC;AACvCP,UAAAA,MAAM,CAACG,UAAP,GAAoB,KAApB,CADuC,CACd;AAC1B;AACF;AACF;;AACDH,IAAAA,MAAM,CAACE,KAAP,GAAeF,MAAM,CAACE,KAAP,CAAaM,OAAb,CAAqB,CAArB,CAAf;AACA,WAAOR,MAAP;AACD,GAtB4B,CAA7B;AAwBA,SAAO;AACLV,IAAAA,QAAQ,EAARA,QADK;AAELE,IAAAA,kBAAkB,EAAlBA,kBAFK;AAGLK,IAAAA,WAAW,EAAXA,WAHK;AAILC,IAAAA,QAAQ,EAARA,QAJK;AAKLC,IAAAA,YAAY,EAAZA;AALK,GAAP;AAOD,CAhDM","sourcesContent":["import { useStore } from 'vuex'\r\nimport { computed } from 'vue'\r\n// 购物车相关逻辑\r\nexport const useCommonCartEffect = (shopId) => {\r\n  const store = useStore()\r\n  const cartList = store.state.cartList\r\n  const changeCartItemInfo = (shopId, productId, productInfo, num) => {\r\n    store.commit('changeCartItemInfo', {\r\n      shopId, productId, productInfo, num\r\n    })\r\n  }\r\n  const productList = computed(() => {\r\n    const productList = cartList[shopId]?.productList || {}// 如果购物车中没有该商铺的商品，那么就令该商品列表为空对象\r\n    return productList\r\n  })\r\n\r\n  const shopName = computed(() => {\r\n    const shopName = cartList[shopId]?.shopName || ''\r\n    return shopName\r\n  })\r\n  const calculations = computed(() => {\r\n    const productList = cartList[shopId]?.productList\r\n\r\n    const result = {\r\n      total: 0,\r\n      price: 0,\r\n      allChecked: true\r\n    }\r\n    if (productList) {\r\n      for (const i in productList) {\r\n        const product = productList[i]\r\n        result.total += product.count\r\n        if (product.check) {\r\n          result.price += (product.count * product.price)\r\n        }\r\n        if (product.count > 0 && !product.check) {\r\n          result.allChecked = false// 只要有一个商品的状态不是check=true那么全部的check状态就为false\r\n        }\r\n      }\r\n    }\r\n    result.price = result.price.toFixed(2)\r\n    return result\r\n  })\r\n\r\n  return {\r\n    cartList,\r\n    changeCartItemInfo,\r\n    productList,\r\n    shopName,\r\n    calculations\r\n  }\r\n}\r\n"]}]}