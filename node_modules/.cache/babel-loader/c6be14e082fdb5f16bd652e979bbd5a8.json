{"remainingRequest":"G:\\jingdong\\node_modules\\babel-loader\\lib\\index.js!G:\\jingdong\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!G:\\jingdong\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!G:\\jingdong\\src\\views\\login\\Login.vue?vue&type=script&lang=js","dependencies":[{"path":"G:\\jingdong\\src\\views\\login\\Login.vue","mtime":1624020521947},{"path":"G:\\jingdong\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\jingdong\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"G:\\jingdong\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\jingdong\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkc6L2ppbmdkb25nL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tICd2dWUtcm91dGVyJzsKaW1wb3J0IHsgcmVhY3RpdmUgfSBmcm9tICd2dWUnOwppbXBvcnQgeyBwb3N0IH0gZnJvbSAnLi4vLi4vdXRpbHMvcmVxdWVzdCc7CmltcG9ydCBUb2FzdCBmcm9tICcuLi8uLi9jb21wb25lbnRzL1RvYXN0JzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIFRvYXN0OiBUb2FzdAogIH0sCiAgbmFtZTogJ0xvZ2luJywKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoKSB7CiAgICB2YXIgcm91dGVyID0gdXNlUm91dGVyKCk7CiAgICB2YXIgZGF0YSA9IHJlYWN0aXZlKHsKICAgICAgLy8g5Lit55qE5pWw5o2u5bey57uP5LiOIGlucHV05qGG55qE6L6T5YWl5YaF5a655a6M5oiQ5LqG5Y+M5ZCR57uR5a6a77yM6L6T5YWl5YaF5a655pS55Y+Y77yMZGF0YemHjOmdoueahOaVsOaNruS5n+ebuOW6lOaUueWPmO+8jOaJgOS7peimgeeUqHJlYWN0aXZlIOWunueOsOaVsOaNruaUueWPmOaXtueahOWKqOaAgeWTjeW6lAogICAgICB1c2VybmFtZTogJycsCiAgICAgIHBhc3N3b3JkOiAnJywKICAgICAgc2hvd1RvYXN0OiBmYWxzZSwKICAgICAgdG9hc3RNZXNzYWdlOiAnJwogICAgfSk7CgogICAgdmFyIHNob3dUb2FzdCA9IGZ1bmN0aW9uIHNob3dUb2FzdChtZXNzYWdlKSB7CiAgICAgIC8vIOWboOS4uuivt+axguWksei0peS4jueZu+W9leWksei0peeahOW8ueeql+mAu+i+keS4gOagt++8jOaJgOS7peWwgeijheW8ueeql+WHveaVsAogICAgICBkYXRhLnRvYXN0TWVzc2FnZSA9IG1lc3NhZ2U7CiAgICAgIGRhdGEuc2hvd1RvYXN0ID0gdHJ1ZTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgZGF0YS5zaG93VG9hc3QgPSBmYWxzZTsKICAgICAgICBkYXRhLnRvYXN0TWVzc2FnZSA9ICcnOwogICAgICB9LCAyMDAwKTsKICAgIH07CgogICAgdmFyIGhhbmRsZUxvZ2luID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHJlc3VsdDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIHBvc3QoJy9hcGkxL3VzZXIvbG9naW4nLCB7CiAgICAgICAgICAgICAgICAgIC8vIHBvc3Tlh73mlbDlrprkuYnlnKh1dGlscy9yZXF1ZXN0Lmpz5Lit77yM5bCB6KOF5LqG5Y+R6YCBcG9zdOivt+axgueahOWKn+iDvQogICAgICAgICAgICAgICAgICB1c2VybmFtZTogZGF0YS51c2VybmFtZSwKICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IGRhdGEucGFzc3dvcmQKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTsKCiAgICAgICAgICAgICAgICBpZiAoKHJlc3VsdCA9PT0gbnVsbCB8fCByZXN1bHQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlc3VsdC5lcnJubykgPT09IDApIHsKICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmlzTG9naW4gPSB0cnVlOwogICAgICAgICAgICAgICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ0hvbWUnCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgc2hvd1RvYXN0KCfnmbvlvZXlpLHotKUnKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDg7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDApOwogICAgICAgICAgICAgICAgc2hvd1RvYXN0KCfor7fmsYLlpLHotKUnKTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMCwgOF1dKTsKICAgICAgfSkpOwoKICAgICAgcmV0dXJuIGZ1bmN0aW9uIGhhbmRsZUxvZ2luKCkgewogICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH07CiAgICB9KCk7CgogICAgdmFyIGhhbmRsZVJlZ2lzdGVyQ2xpY2sgPSBmdW5jdGlvbiBoYW5kbGVSZWdpc3RlckNsaWNrKCkgewogICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogJ1JlZ2lzdGVyJwogICAgICB9KTsgLy8g6Lez6L2s5YiwUmVnaXN0ZXLpobXpnaIKICAgIH07CgogICAgcmV0dXJuIHsKICAgICAgaGFuZGxlTG9naW46IGhhbmRsZUxvZ2luLAogICAgICBoYW5kbGVSZWdpc3RlckNsaWNrOiBoYW5kbGVSZWdpc3RlckNsaWNrLAogICAgICBkYXRhOiBkYXRhCiAgICB9OwogIH0KfTs="},{"version":3,"sources":["G:\\jingdong\\src\\views\\login\\Login.vue"],"names":[],"mappings":";;AAuBA,SAAS,SAAT,QAA0B,YAA1B;AACA,SAAS,QAAT,QAAyB,KAAzB;AACA,SAAS,IAAT,QAAqB,qBAArB;AACA,OAAO,KAAP,MAAkB,wBAAlB;AACA,eAAe;AACb,EAAA,UAAU,EAAE;AAAE,IAAA,KAAI,EAAJ;AAAF,GADC;AAEb,EAAA,IAAI,EAAE,OAFO;AAGb,EAAA,KAHa,mBAGJ;AACP,QAAM,MAAK,GAAI,SAAS,EAAxB;AACA,QAAM,IAAG,GAAI,QAAQ,CAAC;AAAE;AACtB,MAAA,QAAQ,EAAE,EADU;AAEpB,MAAA,QAAQ,EAAE,EAFU;AAGpB,MAAA,SAAS,EAAE,KAHS;AAIpB,MAAA,YAAY,EAAE;AAJM,KAAD,CAArB;;AAMA,QAAM,SAAQ,GAAI,SAAZ,SAAY,CAAC,OAAD,EAAa;AAAE;AAC/B,MAAA,IAAI,CAAC,YAAL,GAAoB,OAApB;AACA,MAAA,IAAI,CAAC,SAAL,GAAiB,IAAjB;AACA,MAAA,UAAU,CAAC,YAAM;AACf,QAAA,IAAI,CAAC,SAAL,GAAiB,KAAjB;AACA,QAAA,IAAI,CAAC,YAAL,GAAoB,EAApB;AACD,OAHS,EAGP,IAHO,CAAV;AAIF,KAPA;;AAQA,QAAM,WAAU;AAAA,yEAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEK,IAAI,CAAC,kBAAD,EAAqB;AAAE;AAC9C,kBAAA,QAAQ,EAAE,IAAI,CAAC,QAD6B;AAE5C,kBAAA,QAAQ,EAAE,IAAI,CAAC;AAF6B,iBAArB,CAFT;;AAAA;AAEV,gBAAA,MAFU;AAMhB,gBAAA,OAAO,CAAC,GAAR,CAAY,MAAZ;;AACA,oBAAI,CAAA,MAAM,SAAN,IAAA,MAAM,WAAN,YAAA,MAAM,CAAE,KAAR,MAAkB,CAAtB,EAAyB;AACvB,kBAAA,YAAY,CAAC,OAAb,GAAuB,IAAvB;AACA,kBAAA,MAAM,CAAC,IAAP,CAAY;AAAE,oBAAA,IAAI,EAAE;AAAR,mBAAZ;AACF,iBAHA,MAGO;AACL,kBAAA,SAAS,CAAC,MAAD,CAAT;AACF;;AAZgB;AAAA;;AAAA;AAAA;AAAA;AAchB,gBAAA,SAAS,CAAC,MAAD,CAAT;;AAdgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA,sBAAV,WAAU;AAAA;AAAA;AAAA,OAAhB;;AAwBA,QAAM,mBAAkB,GAAI,SAAtB,mBAAsB,GAAM;AAChC,MAAA,MAAM,CAAC,IAAP,CAAY;AAAE,QAAA,IAAI,EAAE;AAAR,OAAZ,EADgC,CACC;AACnC,KAFA;;AAGA,WAAO;AAAE,MAAA,WAAW,EAAX,WAAF;AAAe,MAAA,mBAAmB,EAAnB,mBAAf;AAAoC,MAAA,IAAG,EAAH;AAApC,KAAP;AACF;AA/Ca,CAAf","sourcesContent":["<template>\r\n<div class=\"wrapper\">\r\n  <img class=\"wrapper__img\" src=\"../../assets/编组.png\">\r\n<div class=\"wrapper__input\">\r\n  <!-- 使用v-model实现数据的双向绑定，data.username就等于此时输入这个input框的值 -->\r\n  <input class=\"wrapper__input__content\" placeholder=\"请输入手机号\" v-model=\"data.username\"/>\r\n  </div>\r\n  <div class=\"wrapper__input\">\r\n    <!-- 使用v-model实现数据的双向绑定，data.password就等于此时输入这个input框的值 -->\r\n  <input\r\n  class=\"wrapper__input__content\" placeholder=\"请输入密码\" type=\"password\" v-model=\"data.password\"/>\r\n  </div>\r\n  <div class=\"wrapper__login-button\" @click=\"handleLogin\">\r\n    登录\r\n  </div>\r\n  <div class=\"wrapper__login-link\" @click=\"handleRegisterClick\">\r\n    立即注册\r\n  </div>\r\n  <Toast v-if=\"data.showToast\" :message=\"data.toastMessage\"/>\r\n  </div>\r\n\r\n</template>\r\n<script>\r\nimport { useRouter } from 'vue-router'\r\nimport { reactive } from 'vue'\r\nimport { post } from '../../utils/request'\r\nimport Toast from '../../components/Toast'\r\nexport default {\r\n  components: { Toast },\r\n  name: 'Login',\r\n  setup () {\r\n    const router = useRouter()\r\n    const data = reactive({ // 中的数据已经与 input框的输入内容完成了双向绑定，输入内容改变，data里面的数据也相应改变，所以要用reactive 实现数据改变时的动态响应\r\n      username: '',\r\n      password: '',\r\n      showToast: false,\r\n      toastMessage: ''\r\n    })\r\n    const showToast = (message) => { // 因为请求失败与登录失败的弹窗逻辑一样，所以封装弹窗函数\r\n      data.toastMessage = message\r\n      data.showToast = true\r\n      setTimeout(() => {\r\n        data.showToast = false\r\n        data.toastMessage = ''\r\n      }, 2000)\r\n    }\r\n    const handleLogin = async () => {\r\n      try { // 如果接口地址写错那么就会直接弹出去，不会政治性else登录失败语句，所以用try catch捕获错误\r\n        const result = await post('/api1/user/login', { // post函数定义在utils/request.js中，封装了发送post请求的功能\r\n          username: data.username,\r\n          password: data.password\r\n        })\r\n        console.log(result)\r\n        if (result?.errno === 0) {\r\n          localStorage.isLogin = true\r\n          router.push({ name: 'Home' })\r\n        } else {\r\n          showToast('登录失败')\r\n        }\r\n      } catch {\r\n        showToast('请求失败')\r\n      }\r\n\r\n      // .then(() => {\r\n      //   localStorage.isLogin = true// 只要点击登录就给  localStorage.isLogin = true，跳转需要使用这个localStorage.isLogin\r\n      //   router.push({ name: 'Home' })// 跳转到Home页面\r\n      // }).catch(() => {\r\n      //   alert('失败')\r\n      // })\r\n    }\r\n    const handleRegisterClick = () => {\r\n      router.push({ name: 'Register' })// 跳转到Register页面\r\n    }\r\n    return { handleLogin, handleRegisterClick, data }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n@import '../../style/viriables.scss';\r\n.wrapper{\r\n  position: absolute;\r\n  top:50%;\r\n  left:0;\r\n  right:0;\r\n  transform: translateY(-50%);\r\n  &__img{\r\n    width:.66rem;\r\n    height: .66rem;\r\n    display: block;\r\n    margin:0 auto .4rem auto;\r\n  }\r\n  &__input{\r\n    background: #F9F9F9;\r\n    border:1px solid rgba(0,0,0,0.10);\r\n    border-radius: 6px;\r\n    height:.48rem;\r\n    margin:0 .4rem .16rem .4rem;\r\n    padding: 0 .16rem;\r\n    &__content{\r\n      border:none;\r\n      outline: none;\r\n      line-height: .48rem;\r\n      width: 100%;\r\n      background: none;\r\n      font-size: .16rem;\r\n       color: $content-notice-fontcolor;\r\n      &::placeholder{\r\n        color: $content-notice-fontcolor;\r\n      }\r\n    }\r\n  }\r\n  &__login-button{\r\n   background: #0091FF;\r\n   box-shadow: 0 4px 8px 0 rgba(0,   145,255,0.32);\r\n    border-radius: 4px;\r\n    line-height:.48rem;\r\n    width: 2.95rem;\r\n    color:#FFFFFF;\r\n    text-align: center;\r\n    font-size: .16rem;\r\n    margin: .32rem .4rem 0 .4rem;\r\n  }\r\n  &__login-link{\r\n    text-align: center;\r\n    font-size: .14rem;\r\n    margin:.16rem;\r\n    color:$content-notice-fontcolor;\r\n\r\n  }\r\n}\r\n</style>\r\n"],"sourceRoot":""}]}